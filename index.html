<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H√≥a ƒë∆°n b√°n l·∫ª</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://banle-js.vercel.app/caidatbanle.js" defer></script>
  <style>
    body { font-family: Arial; margin: 0; }
    .header {
      background-color: #0078d7;
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 28px;
      font-weight: bold;
    }
    .top-inputs {
      display: flex;
      padding: 5px;
      gap: 5px;
      background: #f4f4f4;
      align-items: center;
    }
    .top-inputs input,
    .top-inputs select {
      padding: 4px;
      font-size: 16px;
    }
    .top-inputs input { box-sizing: border-box; }
    #masp { width: 100px; background: cyan; }
    #soluong { width: 50px; background: yellow; text-align: center; }
    #dvt { width: 40px; }
    #size { width: 40px; text-align: center; }
    #gia, #khuyenmai, #thanhtien { width: 100px; text-align: right; }
    #ghichu { flex: 1; }

    .main {
      display: flex;
      height: calc(100vh - 150px);
    }
    .table-area {
      flex: 1;
      overflow: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table th, table td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    .sidebar {
      width: 350px;
      border-left: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .tabs {
      display: flex;
      background: #eee;
    }
    .tabs button {
      flex: 1;
      padding: 8px;
      cursor: pointer;
      border: none;
      background: #ddd;
    }
    .tabs button.active {
      background: white;
      font-weight: bold;
      border-bottom: 2px solid #0078d7;
    }
    .tab-content {
      flex: 1;
      padding: 10px;
      font-size: 13px;
    }
    .tab-pane { display: none; }
    .tab-pane.active { display: block; }
    .sidebar input, .sidebar select {
      width: 100%;
      padding: 4px;
      font-size: 13px;
      margin-bottom: 4px;
    }
    .checkbox-list label {
      display: block;
      margin-bottom: 2px;
    }
    .btn-big {
      width: 100%;
      font-size: 18px;
      font-weight: bold;
      padding: 10px;
      margin: 6px 0;
    }
    .red { background-color: darkred; color: white; }
    .gray { background-color: lightgray; color: black; }
    .product-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border: 1px solid #ccc;
    }
    .footer-buttons {
      display: flex;
      justify-content: space-between;
      padding: 5px;
      background: #dce9f9;
    }
    .popup {
      display: none;
      position: fixed;
      top: 10%;
      left: 5%;
      width: 90%;
      height: 70%;
      background: white;
      border: 1px solid #ccc;
      z-index: 999;
      box-shadow: 0 0 10px #333;
    }
    .popup-content {
      padding: 10px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .popup-list {
      flex: 1;
      overflow-y: auto;
      border: 1px solid #ddd;
      margin-top: 6px;
    }
  </style>
  <script>
    function switchTab(tabName) {
      document.querySelectorAll('.tab-pane').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      document.getElementById('btn_' + tabName).classList.add('active');
    }
    window.onload = () => switchTab('thongtin');
    function dongPopupDM() {
      document.getElementById('popupDanhMuc').style.display = 'none';
    }
  </script>
</head>
<body>
  <div class="header">H√≥a ƒë∆°n b√°n l·∫ª</div>
  <div class="top-inputs">
    <input id="masp" placeholder="M√£ SP">
    <input id="soluong" value="1">
    <input id="dvt" placeholder="ƒë√¥i">
    <input id="size" placeholder="42">
    <input id="gia" placeholder="Gi√° SP">
    <input id="khuyenmai" placeholder="KM">
    <input id="thanhtien" placeholder="Th√†nh ti·ªÅn">
    <input id="ghichu" placeholder="Ghi ch√∫ HH">
    <button id="masp-search">üîç</button>
  </div>
  <div class="main">
    <div class="table-area">
      <table id="bangketqua">
        <thead>
          <tr>
            <th>M√£ h√†ng</th><th>T√™n h√†ng</th><th>DVT</th><th>S.l∆∞·ª£ng</th>
            <th>K√≠ch c·ª°</th><th>ƒê∆°n gi√°</th><th>Khuy·∫øn m·∫°i</th><th>Th√†nh ti·ªÅn</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="sidebar">
      <div class="tabs">
        <button id="btn_thongtin" onclick="switchTab('thongtin')">Th√¥ng tin h√≥a ƒë∆°n</button>
        <button id="btn_tacvu" onclick="switchTab('tacvu')">Thao t√°c nhanh</button>
      </div>
      <div class="tab-content">
        <div id="thongtin" class="tab-pane">
          <label>Ng√†y <input id="ngay" type="date"></label>
          <label>Gi·ªù <input id="gio"></label>
          <label>M√£ NV <input id="manv"></label>
          <label>T√™n NV <input id="tennv" readonly></label>
          <label>Kh√°ch h√†ng <select id="khachhang"></select></label>
          <label>H√¨nh th·ª©c TT <select id="hinhthuctt"><option value="tm">Ti·ªÅn m·∫∑t</option><option value="ck">Chuy·ªÉn kho·∫£n</option></select></label>
          <label>S·ªë Hƒê <input id="sohd" readonly></label>
          <label>Chi·∫øt kh·∫•u <input id="chietkhau"></label>
          <label>T·ªïng KM <input id="tongkm" readonly></label>
          <label>Ph·∫£i tr·∫£ <input id="phaithanhtoan" readonly></label>
          <label>Kh√°ch tr·∫£ <input id="khachtra"></label>
          <label>C√≤n l·∫°i <input id="conlai" readonly></label>
          <label>M·∫∑t h√†ng <input id="mathang" readonly></label>
          <label>T·ªïng SL <input id="tongsl" readonly></label>
          <label>V·ªã tr√≠ <input id="vitri" readonly></label>
        </div>
        <div id="tacvu" class="tab-pane">
          <div class="checkbox-list">
            <label><input type="checkbox" id="nhapnhanh"> Nh·∫≠p nhanh</label>
            <label><input type="checkbox" id="size45"> Size 45</label>
            <label><input type="checkbox"> In sau khi l∆∞u</label>
            <label><input type="checkbox"> In kh√¥ng h·ªèi</label>
            <label><input type="checkbox"> C·ªông d·ªìn s·ªë l∆∞·ª£ng</label>
          </div>
        </div>
      </div>
      <label><input type="checkbox" checked> Hi·ªÉn th·ªã h√¨nh ·∫£nh</label>
      <div class="btn-big red">T·ªïng ph·∫£i tr·∫£ <span id="phaithanhtoan" style="float:right">0</span></div>
      <div class="btn-big gray">Kh√°ch thanh to√°n <span id="khachtra" style="float:right">0</span></div>
      <div class="btn-big gray">C√≤n l·∫°i <span id="conlai" style="float:right">0</span></div>
      <img class="product-image" src="https://via.placeholder.com/300x180.png?text=·∫¢nh+S·∫£n+Ph·∫©m" alt="·∫¢nh s·∫£n ph·∫©m">
    </div>
  </div>
  <div class="footer-buttons">
    <button id="them">Th√™m m·ªõi</button>
    <button id="luu">L∆∞u</button>
    <button onclick="luuHoaDonQuaAPI()">L∆∞u API</button>
    <button id="quaylai">Quay l·∫°i</button>
    <button id="tieptuc">Ti·∫øp t·ª•c</button>
    <button id="timkiem">T√¨m ki·∫øm</button>
    <button id="xoa">Xo√°</button>
    <button id="xemin">Xem in</button>
    <button id="xuatexcel">Xu·∫•t Excel</button>
  </div>

  <div id="popupDanhMuc" class="popup">
    <div class="popup-content">
      <strong>T√¨m ki·∫øm m√£ s·∫£n ph·∫©m</strong>
      <input id="timKiemMaspPopup" placeholder="Nh·∫≠p t·ª´ kh√≥a...">
      <div class="popup-list" id="danhSachSP"></div>
      <button onclick="dongPopupDM()">ƒê√≥ng</button>
    </div>
  </div>
</body>
</html>
