<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>H√≥a ƒë∆°n b√°n l·∫ª</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable@13.0.0/dist/handsontable.min.css" />
   
<script type="module" src="scripts/main.js"></script>

<style>
    body { font-family: Arial; margin: 0; }
    .header {
      background-color: #0078d7;
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 28px;
      font-weight: bold;
    }
    .top-inputs {
      display: flex;
      padding: 5px;
      gap: 5px;
      background: #f4f4f4;
      align-items: center;
    }
    .top-inputs input,
    .top-inputs select {
      padding: 4px;
      font-size: 16px;
    }
    .top-inputs input { box-sizing: border-box; }
    #masp { width: 250px; background: cyan; }
    #soluong { width: 60px; background: yellow; text-align: center; }
    #dvt { width: 60px; }
    #size { width: 60px; text-align: center; }
    #gia, #khuyenmai, #thanhtien { width: 150px; text-align: right; }
    #ghichu { flex: 1; }

    .main {
      display: flex;
      height: calc(100vh - 150px);
    }
    .table-area {
      flex: 1;
      overflow: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table th, table td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    .sidebar {
      width: 350px;
      border-left: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .tabs {
      display: flex;
      background: #eee;
    }
    .tabs button {
      flex: 1;
      padding: 8px;
      cursor: pointer;
      border: none;
      background: #ddd;
    }
    .tabs button.active {
      background: white;
      font-weight: bold;
      border-bottom: 2px solid #0078d7;
    }
    .tab-content {
      flex: 1;
      padding: 10px;
      font-size: 13px;
    }
    .tab-pane { display: none; }
    .tab-pane.active { display: block; }
    .sidebar input, .sidebar select {
      width: 100%;
      padding: 4px;
      font-size: 13px;
      margin-bottom: 4px;
    }
    .checkbox-list label {
      display: block;
      margin-bottom: 2px;
    }
    .btn-big {
      width: 85%;
      font-size: 18px;
      font-weight: bold;
      padding: 10px;
      margin: 6px 0;
    }
    .red { background-color: darkred; color: white; }
    .gray { background-color: lightgray; color: black; }
    .product-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border: 1px solid #ccc;
    }
    .footer-buttons {
      display: flex;
      justify-content: space-between;
      padding: 5px;
      background: #dce9f9;
    }
    .popup {
      display: none;
      position: fixed;
      top: 10%;
      left: 5%;
      width: 90%;
      height: 70%;
      background: white;
      border: 1px solid #ccc;
      z-index: 999;
      box-shadow: 0 0 10px #333;
    }
    .popup-content {
      padding: 10px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .popup-list {
      flex: 1;
      overflow-y: auto;
      border: 1px solid #ddd;
      margin-top: 6px;
    }
  
/* B·ªë c·ª•c nh√≥m nh·∫≠p li·ªáu */
.tab-pane label {
  display: inline-block;
  width: 32%;
  box-sizing: border-box;
  padding-right: 4px;
  margin-bottom: 6px;
}
.tab-pane input, .tab-pane select {
  width: 100%;
}
    .sidebar {
  width: 350px;
  border-left: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* ‚ö†Ô∏è CHUY·ªÇN T·ª™ space-between */
}

.tab-content {
  flex-grow: 0; /* ‚ö†Ô∏è KH√îNG chi·∫øm to√†n b·ªô chi·ªÅu cao */
}

.product-image {
  margin-top: 10px;
  max-height: 180px;
  object-fit: cover;
}

    #popupDanhMuc { display: none !important; }

</style>
<script>
    function switchTab(tabName) {
      document.querySelectorAll('.tab-pane').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      document.getElementById('btn_' + tabName).classList.add('active');
    }
   document.addEventListener("DOMContentLoaded", () => {
  switchTab("thongtin");
});

    function dongPopupDM() {
      document.getElementById('popupDanhMuc').style.display = 'none';
    }
  </script>
</head>
<body>
<div class="header">H√≥a ƒë∆°n b√°n l·∫ª</div>
<div class="top-inputs">
    <div style="position: relative;">
  <input id="masp" placeholder="M√£ SP" autocomplete="off" />
  <div id="popup_masp" style="position: absolute; top: 100%; left: 0; width: 300px; max-height: 400px; background: #fff; border: 1px solid #ccc; display: none; overflow-y: auto; z-index: 10000;"></div>
</div>


<input id="soluong" value="1"/>
<input id="dvt" placeholder="DVT"/>
<input id="size" placeholder="SIZE"/>
<input id="gia" placeholder="Gi√° SP"/>
<input id="khuyenmai" placeholder="khuyen mai"/>
<input id="thanhtien" placeholder="Th√†nh ti·ªÅn"/>
    <input id="sohd" placeholder="S·ªë Hƒê"/>
    
<input id="ghichu" placeholder="Ghi ch√∫ HH"/>
<button id="masp-search">üîç</button>
</div>
<div class="main">
<div class="table-area">
<table id="bangketqua">
<thead>
<tr>
<th>M√£ h√†ng</th><th>T√™n h√†ng</th><th>K√≠ch c·ª°</th><th>S.l∆∞·ª£ng</th>
<th>T·ªïng</th><th>ƒê∆°n gi√°</th><th>Khuy·∫øn m·∫°i</th><th>Th√†nh ti·ªÅn</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
<div class="sidebar">
<div class="tabs">
<button id="btn_thongtin" onclick="switchTab('thongtin')">Th√¥ng tin h√≥a ƒë∆°n</button>
<button id="btn_tacvu" onclick="switchTab('tacvu')">Thao t√°c nhanh</button>
</div>
<div class="tab-content">
<div class="tab-pane" id="thongtin">
<label>Ng√†y <input id="ngay" type="date"/></label>
<label>Gi·ªù <input id="gio"/></label>
<label>M√£ NV <input id="manv"/></label>
<label>T√™n NV <input id="tennv" readonly=""/></label><label>C∆° s·ªü <select id="diadiem"><option value="cs1">C∆° s·ªü 1</option><option value="cs2">C∆° s·ªü 2</option></select></label>
<label>Kh√°ch h√†ng <select id="khachhang"></select></label>
<label>H√¨nh th·ª©c TT <select id="hinhthuctt"><option value="tm">Ti·ªÅn m·∫∑t</option><option value="ck">Chuy·ªÉn kho·∫£n</option></select></label>

<label>Chi·∫øt kh·∫•u <input id="chietkhau"/></label>
<label>T·ªïng KM <input id="tongkm" readonly=""/></label>
<label>Ph·∫£i tr·∫£ <input id="phaithanhtoan" readonly=""/></label>
<label>Kh√°ch tr·∫£ <input id="khachtra"/></label>
<label>C√≤n l·∫°i <input id="conlai" readonly=""/></label>
<label>M·∫∑t h√†ng <input id="mathang" readonly=""/></label>
<label>T·ªïng SL <input id="tongsl" readonly=""/></label>
<label>V·ªã tr√≠ <input id="vitri" readonly=""/></label>
</div>
<div class="tab-pane" id="tacvu">
<div class="checkbox-list">
<label><input id="nhapnhanh" type="checkbox"/> Nh·∫≠p nhanh</label>
<label><input id="size45" type="checkbox"/> Size 45</label>
<label><input id="inSauKhiLuu" type="checkbox"/> In sau khi l∆∞u</label>
<label><input id="inKhongHoi" type="checkbox"/> In kh√¥ng h·ªèi</label>

<label><input type="checkbox"/> C·ªông d·ªìn s·ªë l∆∞·ª£ng</label>
</div>
</div>
</div>
<label><input checked="" type="checkbox"/> Hi·ªÉn th·ªã h√¨nh ·∫£nh</label>

    <div class="btn-big red">T·ªïng ph·∫£i tr·∫£ <span id="phaithanhtoan_text" style="float:right">0</span></div>
<div class="btn-big gray">Kh√°ch thanh to√°n <span id="khachtra_text" style="float:right">0</span></div>
<div class="btn-big gray">C√≤n l·∫°i <span id="conlai_text" style="float:right">0</span></div>

    
<img alt="·∫¢nh s·∫£n ph·∫©m" class="product-image" src="https://via.placeholder.com/300x300.png?text=·∫¢nh+S·∫£n+Ph·∫©m"/>
</div>
</div>
<div class="footer-buttons">
<button id="them">Th√™m m·ªõi</button>
<button id="luu">L∆∞u</button>
<button onclick="luuHoaDonQuaAPI()">L∆∞u API</button>
<button onclick="luuHoaDonCaHaiBan()">üíæ L∆∞u c·∫£ hai b·∫£ng</button>

<button id="quaylai">Quay l·∫°i</button>
<button id="tieptuc">Ti·∫øp t·ª•c</button>
<button id="timkiem">T√¨m ki·∫øm</button>
<button id="xoa">Xo√°</button>
<button id="xemin">Xem in</button>
<button id="xuatexcel">Xu·∫•t Excel</button>
</div>
<div class="popup" id="popupDanhMuc">
<div class="popup-content">
<strong>T√¨m ki·∫øm m√£ s·∫£n ph·∫©m</strong>
<input id="timKiemMaspPopup" placeholder="Nh·∫≠p t·ª´ kh√≥a..."/>
<div class="popup-list" id="danhSachSP"></div>
<button onclick="dongPopupDM()">ƒê√≥ng</button>
</div>
</div>
    <!-- ‚úÖ Popup x√°c th·ª±c s·ª≠a h√≥a ƒë∆°n -->
<div id="popupXacThucSua" style="display:none; position:fixed; top:30%; left:50%; transform:translate(-50%, -50%);
  background:white; padding:20px; border:1px solid #ccc; z-index:9999; box-shadow: 0 0 10px #000;">
  <h3>X√°c th·ª±c s·ª≠a h√≥a ƒë∆°n</h3>
  <input id="xacmanv" placeholder="M√£ nh√¢n vi√™n" style="display:block; margin-bottom:6px; width:100%; padding:6px;" />
  <input id="xacmatkhau" placeholder="M·∫≠t kh·∫©u" type="password" style="display:block; margin-bottom:10px; width:100%; padding:6px;" />
  <button onclick="xacNhanSuaHoaDon()">X√°c nh·∫≠n</button>
  <button onclick="document.getElementById('popupXacThucSua').style.display='none'">H·ªßy</button>
</div>

    <!-- Popup x√°c nh·∫≠n th√™m m·ªõi -->
<div id="popupThemMoi" class="popup-confirm" style="display:none; position:fixed; top:30%; left:50%; transform:translate(-50%,-50%);
  background:white; border:1px solid #888; padding:20px; z-index:10000; box-shadow:0 0 10px #000;">
  <h3>B·∫°n c√≥ th·ª±c s·ª± mu·ªën th√™m m·ªõi?</h3>
  <div style="text-align:center; margin-top:10px;">
    <button id="btnThemMoiCo">‚úÖ C√≥</button>
    <button onclick="dongTatCaPopup()">‚ùå Kh√¥ng</button>
  </div>
</div>

<!-- Popup nh·∫≠p m√£ s·∫£n ph·∫©m m·ªõi -->
<div id="popupNhapMaMoi" class="popup-confirm" style="display:none; position:fixed; top:10%; left:50%; transform:translate(-50%,0);
  background:white; border:1px solid #888; padding:20px; z-index:10001; box-shadow:0 0 10px #000; width:400px; max-height:90%; overflow:auto;">
  <h3>Th√™m m√£ s·∫£n ph·∫©m m·ªõi</h3>
  <div id="formFields"></div>
  <button onclick="luuMaSanPhamMoi()">L∆∞u m√£ m·ªõi</button>
  <button onclick="document.getElementById('popupNhapMaMoi').style.display='none'">H·ªßy</button>
  <button onclick="moCauHinhTruong()">‚öô C·∫•u h√¨nh hi·ªÉn th·ªã</button>
</div>

<div id="popupCauHinh" class="popup-confirm" style="display:none; position:fixed; top:10%; left:50%; transform:translateX(-50%);
  background:white; z-index:10010; border:1px solid #888; padding:20px; width:400px;">
  <h3>C·∫•u h√¨nh tr∆∞·ªùng hi·ªÉn th·ªã</h3>
  <div id="dsCauHinhTruong"></div>
  <div style="text-align:right; margin-top:10px;">
    <button onclick="luuCauHinhTruong()">L∆∞u</button>
    <button onclick="document.getElementById('popupCauHinh').style.display='none'">ƒê√≥ng</button>
  </div>
</div>


    
<div id="popupBangDanhMuc" class="popup" style="display:none; position:fixed; top:5%; left:5%; width:90%; height:85%; background:white; z-index:9999; border:1px solid #ccc; box-shadow: 0 0 10px #000;">
  <div style="padding:10px; display:flex; justify-content:space-between; align-items:center;">
    <strong>Danh m·ª•c h√†ng h√≥a</strong>
    <button onclick="document.getElementById('popupBangDanhMuc').style.display='none'">ƒê√≥ng</button>
  </div>
  <div style="padding: 0 10px 10px;">
    <input id="timKiemMaspDM" placeholder="T√¨m m√£ s·∫£n ph·∫©m..." oninput="timLaiTrongBangDM()" style="width: 300px; padding: 4px;" />
    <button onclick="chonDongDeSua()">‚úèÔ∏è S·ª≠a danh m·ª•c</button>
   
  </div>
  <div id="hotDanhMuc" style="height: calc(100% - 100px); margin: 0 10px;"></div>
</div>

    <!-- ‚úÖ Popup nh·∫≠p/s·ª≠a m√£ s·∫£n ph·∫©m m·ªõi -->
<div id="popupNhapHangHoa" style="display:none; position:fixed; top:5%; left:50%; transform:translateX(-50%);
  background:white; border:1px solid #888; padding:20px; z-index:10003; width:550px; max-height:90%; overflow:auto; box-shadow:0 0 10px #000;">
  <h3 id="tieudePopupHangHoa" style="text-align:center; margin-bottom:12px;">Th√¥ng tin s·∫£n ph·∫©m</h3>
  
  <div id="fieldsNhapHangHoa"></div>
  
  <div id="footerHangHoa" style="margin-top:10px; font-size:13px; color:#444;"></div>

    <div style="margin-top:14px; text-align:center;">
  <button onclick="themTiepSanPham()">‚ûï Th√™m m·ªõi</button>
  <button onclick="luuHangHoa()">üíæ L∆∞u d·ªØ li·ªáu</button>
  <button onclick="document.getElementById('popupNhapHangHoa').style.display='none'">‚Ü©Ô∏è Tr·ªü v·ªÅ</button>
  <button onclick="moPopupCauHinh()">‚öô C·∫•u h√¨nh hi·ªÉn th·ªã</button> <!-- ‚úÖ m·ªõi th√™m -->
</div>

  
</div>

    
</body>
</html>
